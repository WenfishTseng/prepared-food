(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a7baa4"],{"3bc8":function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),a={class:"container"},l={class:"row justify-content-lg-center"},n={class:"col-lg-12"},r={class:"table mt-4"},d=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",{width:"120"},"購買時間"),Object(o["createElementVNode"])("th",{width:"120"},"購買人 / Email"),Object(o["createElementVNode"])("th",{width:"120"},"訂單編號"),Object(o["createElementVNode"])("th",null,"訂單明細"),Object(o["createElementVNode"])("th",{width:"100"},"訂單金額"),Object(o["createElementVNode"])("th",{width:"100"},"總金額"),Object(o["createElementVNode"])("th",{width:"100"},"是否付款"),Object(o["createElementVNode"])("th",{width:"180"},"編輯")])],-1),i=["onClick"],s={key:0,class:"text-success"},u=Object(o["createElementVNode"])("i",{class:"bi bi-check-circle-fill me-1"},null,-1),b=Object(o["createTextVNode"])("已付款"),m=[u,b],p={key:1,class:"text-danger"},O=Object(o["createElementVNode"])("i",{class:"bi bi-x-circle-fill me-1"},null,-1),j=Object(o["createTextVNode"])("未付款"),h=[O,j],f={class:"btn-group"},E=["onClick"],N=["onClick"],V={class:"row"},g={class:"col-12"};function v(e,t,c,u,b,O){var j=Object(o["resolveComponent"])("PaginationView"),v=Object(o["resolveComponent"])("CheckModal"),k=Object(o["resolveComponent"])("OrderModal"),y=Object(o["resolveComponent"])("DeleteOrderModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("table",r,[d,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(b.orders,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.user.name)+" ",1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.user.email),1)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.id),1),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",{class:"list-unstyled",key:e.id},[Object(o["createElementVNode"])("li",null,Object(o["toDisplayString"])(e.product.title),1)])})),128))]),Object(o["createElementVNode"])("td",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",{class:"list-unstyled",key:e.id},[Object(o["createElementVNode"])("li",null,Object(o["toDisplayString"])(e.total),1)])})),128))]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(t.total),1),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("a",{class:"text-decoration-none",href:"#",onClick:Object(o["withModifiers"])((function(e){return O.switchPaid(t.id)}),["prevent"])},[t.is_paid?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",s,m)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,h))],8,i)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-info btn-sm me-2",onClick:function(e){return O.openEditModal("edit",t)}}," 編輯 ",8,E),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return O.openEditModal("delete",t)}}," 刪除 ",8,N)])])])})),128))])])])]),Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",g,[Object(o["createVNode"])(j,{pages:b.pagination,onGetProduct:O.getData},null,8,["pages","onGetProduct"])])])]),Object(o["createVNode"])(v),Object(o["createVNode"])(k,{ref:"orderModal",onGetData:O.getData,product:b.tempProduct},null,8,["onGetData","product"]),Object(o["createVNode"])(y,{ref:"deleteModal",onGetData:O.getData,product:b.tempProduct},null,8,["onGetData","product"])],64)}c("99af"),c("e9c4");var k=c("7f96"),y=c("ca8d"),M={class:"modal fade",id:"productModal",ref:"modal"},w={class:"modal-dialog modal-xl",role:"document"},P={class:"modal-content"},B={class:"modal-header"},D=Object(o["createElementVNode"])("h5",{class:"modal-title"},"編輯訂單",-1),x={class:"modal-body"},C={class:"row"},S={class:"col-lg-12"},$={class:"mb-3"},_=Object(o["createElementVNode"])("label",{for:"orderId",class:"form-label"},"產品編號",-1),T=["disabled"],F={class:"col-12 mb-1"},J={class:"mb-3 col-lg-4"},U=Object(o["createElementVNode"])("label",{for:"product-title",class:"form-label"},"產品名稱",-1),G=["onUpdate:modelValue"],L={class:"mb-3 col-lg-4"},q=Object(o["createElementVNode"])("label",{for:"final_total",class:"form-label"},"產品售價",-1),z=["onUpdate:modelValue"],A={class:"mb-3 col-lg-4"},I=Object(o["createElementVNode"])("label",{for:"product-qty",class:"form-label"},"產品數量",-1),X=["onUpdate:modelValue"],H={class:"row mt-3"},K={class:"col-lg-4"},Q={class:"mb-3"},R=Object(o["createElementVNode"])("label",{for:"orderTotal",class:"form-label"},"訂單總金額",-1),W={class:"col-lg-4"},Y={class:"mb-3"},Z=Object(o["createElementVNode"])("label",{for:"orderTel",class:"form-label"},"訂購人電話",-1),ee={class:"col-lg-4"},te={class:"mb-3"},ce=Object(o["createElementVNode"])("label",{for:"orderMail",class:"form-label"},"訂購人郵件",-1),oe={class:"col-lg-12"},ae={class:"mb-3"},le={class:"form-check"},ne=Object(o["createElementVNode"])("label",{class:"form-check-label",for:"is_paid"},"是否付款",-1),re={class:"modal-footer"};function de(e,t,c,a,l,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("div",B,[D,Object(o["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})})]),Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("div",$,[_,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderId",type:"text",class:"form-control",placeholder:"請輸入產品編號",disabled:"".concat(l.tempProduct.id),"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.tempProduct.id=e})},null,8,T),[[o["vModelText"],l.tempProduct.id]])])])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.tempProduct.products,(function(e,t,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"row bg-light py-3",key:e.id},[Object(o["createElementVNode"])("div",F,[Object(o["createElementVNode"])("h5",null,"第 "+Object(o["toDisplayString"])(c+1)+" 筆訂單資訊",1)]),Object(o["createElementVNode"])("div",J,[U,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"product-title",type:"text",class:"form-control",placeholder:"請輸入產品名稱","onUpdate:modelValue":function(t){return e.product.title=t}},null,8,G),[[o["vModelText"],e.product.title]])]),Object(o["createElementVNode"])("div",L,[q,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"final_total",type:"number",class:"form-control",placeholder:"請輸入產品售價","onUpdate:modelValue":function(t){return e.final_total=t}},null,8,z),[[o["vModelText"],e.final_total]])]),Object(o["createElementVNode"])("div",A,[I,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"product-qty",type:"number",min:"0",class:"form-control",placeholder:"請輸入產品數量","onUpdate:modelValue":function(t){return e.qty=t}},null,8,X),[[o["vModelText"],e.qty,void 0,{number:!0}]])])])})),128)),Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",K,[Object(o["createElementVNode"])("div",Q,[R,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderTotal",type:"number",class:"form-control",placeholder:"請輸入訂單金額","onUpdate:modelValue":t[2]||(t[2]=function(e){return l.tempProduct.total=e})},null,512),[[o["vModelText"],l.tempProduct.total]])])]),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",Y,[Z,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderTel",type:"tel",class:"form-control",placeholder:"請輸入訂購人電話","onUpdate:modelValue":t[3]||(t[3]=function(e){return l.tempProduct.user.tel=e})},null,512),[[o["vModelText"],l.tempProduct.user.tel]])])]),Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("div",te,[ce,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"orderMail",type:"email",class:"form-control",placeholder:"請輸入訂購人郵件","onUpdate:modelValue":t[4]||(t[4]=function(e){return l.tempProduct.user.email=e})},null,512),[[o["vModelText"],l.tempProduct.user.email]])])]),Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("div",le,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{id:"is_paid",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=function(e){return l.tempProduct.is_paid=e})},null,512),[[o["vModelCheckbox"],l.tempProduct.is_paid]]),ne])])])])]),Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[6]||(t[6]=function(){return n.closeModal&&n.closeModal.apply(n,arguments)})}," 取消 "),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=function(){return n.editModal&&n.editModal.apply(n,arguments)})}," 確認 ")])])])],512)}var ie=c("7c2b"),se=c.n(ie),ue={data:function(){return{modal:"",tempProduct:{product:{},user:{}}}},props:{product:{type:Object}},watch:{product:function(){this.tempProduct=JSON.parse(JSON.stringify(this.product)),this.isNew=this.stateNew}},mounted:function(){this.modal=new se.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},editModal:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/admin/order/").concat(this.tempProduct.id),c="put";this.$http[c](t,{data:this.tempProduct}).then((function(t){e.$emit("get-data"),e.hideModal(),alert(t.data.message)})).catch((function(e){alert(e.response.data.message)}))},closeModal:function(){this.hideModal()}}},be=c("6b0d"),me=c.n(be);const pe=me()(ue,[["render",de]]);var Oe=pe,je={class:"modal fade",ref:"modal"},he={class:"modal-dialog"},fe={class:"modal-content border-0"},Ee={class:"modal-header bg-danger text-white"},Ne=Object(o["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["createElementVNode"])("span",null,"刪除訂單")],-1),Ve=Object(o["createElementVNode"])("div",{class:"modal-body"},[Object(o["createTextVNode"])(" 是否刪除 "),Object(o["createElementVNode"])("strong",{class:"text-danger"}),Object(o["createTextVNode"])(" 訂單(刪除後將無法恢復)。 ")],-1),ge={class:"modal-footer"};function ve(e,t,c,a,l,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[Object(o["createElementVNode"])("div",he,[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("div",Ee,[Ne,Object(o["createElementVNode"])("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})})]),Ve,Object(o["createElementVNode"])("div",ge,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=function(){return n.hideModal&&n.hideModal.apply(n,arguments)})}," 取消 "),Object(o["createElementVNode"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return n.deleteProduct&&n.deleteProduct.apply(n,arguments)}),class:"btn btn-danger"}," 確認刪除 ")])])])],512)}var ke={data:function(){return{modal:"",tempProduct:{product:{},user:{}}}},props:{product:{type:Object}},watch:{product:function(){this.tempProduct=JSON.parse(JSON.stringify(this.product))}},mounted:function(){this.modal=new se.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},deleteProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/admin/order/").concat(this.tempProduct.id);this.$http.delete(t).then((function(t){e.$emit("get-data"),e.hideModal(),alert(t.data.message)})).catch((function(e){alert(e.response.data.message)}))}}};const ye=me()(ke,[["render",ve]]);var Me=ye,we={data:function(){return{orders:[],tempProduct:{},pagination:{}}},components:{CheckModal:k["a"],PaginationView:y["a"],OrderModal:Oe,DeleteOrderModal:Me},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/admin/orders/?page=").concat(t)).then((function(t){t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination)})).catch((function(e){alert(e.response.data.message)}))},openEditModal:function(e,t){switch(e){case"edit":this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.orderModal.openModal();break;case"add":this.tempProduct={},this.$refs.orderModal.openModal();break;case"delete":this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.deleteModal.openModal();break}},switchPaid:function(e){var t=this;this.tempProduct.is_paid=!this.tempProduct.is_paid;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/admin/order/").concat(e);console.log(c);var o="put";this.$http[o](c,{data:this.tempProduct}).then((function(e){alert(e.data.message),t.getData()})).catch((function(e){alert(e.response.data.message)}))}}};const Pe=me()(we,[["render",v]]);t["default"]=Pe},"7f96":function(e,t,c){"use strict";var o=c("7a23"),a={class:"modal fade",id:"checkModal",tabindex:"-1","aria-hidden":"true"},l={class:"modal-dialog"},n={class:"modal-content"},r=Object(o["createElementVNode"])("div",{class:"modal-header"},[Object(o["createElementVNode"])("h5",{class:"modal-title"},"貼心提示"),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),d=Object(o["createElementVNode"])("div",{class:"modal-body"},[Object(o["createElementVNode"])("p",null,"為什麼要登出？確定要登出嗎？")],-1),i={class:"modal-footer"},s=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"再想一下",-1);function u(e,t,c,u,b,m){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[r,d,Object(o["createElementVNode"])("div",i,[s,Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return m.logout&&m.logout.apply(m,arguments)}),"data-bs-dismiss":"modal"},"對，我就是要登出")])])])])}var b={name:"CheckModal",methods:{logout:function(){this.$emit("logout")}}},m=c("6b0d"),p=c.n(m);const O=p()(b,[["render",u]]);t["a"]=O},b0c0:function(e,t,c){var o=c("83ab"),a=c("5e77").EXISTS,l=c("e330"),n=c("9bf2").f,r=Function.prototype,d=l(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=l(i.exec),u="name";o&&!a&&n(r,u,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})},ca8d:function(e,t,c){"use strict";var o=c("7a23"),a={class:"pagination justify-content-center"},l=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),n=[l],r=["onClick"],d=Object(o["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),i=[d];function s(e,t,c,l,d,s){return Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",a,[Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!c.pages.has_pre}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.$emit("get-product",c.pages.current_page-1)}),["prevent"])),"aria-label":"Previous"},n)],2),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.pages.total_pages,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["page-item",{active:t===c.pages.current_page}]),key:t+"page"},[Object(o["createElementVNode"])("a",{class:"page-link",onClick:Object(o["withModifiers"])((function(c){return e.$emit("get-product",t)}),["prevent"]),href:"#"},Object(o["toDisplayString"])(t),9,r)],2)})),128)),Object(o["createElementVNode"])("li",{class:Object(o["normalizeClass"])(["page-item",{disabled:!c.pages.has_next}])},[Object(o["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(t){return e.$emit("get-product",c.pages.current_page+1)}),["prevent"])),"aria-label":"Next"},i)],2)])}var u={props:["pages"]},b=c("6b0d"),m=c.n(b);const p=m()(u,[["render",s]]);t["a"]=p},e9c4:function(e,t,c){var o=c("23e7"),a=c("da84"),l=c("d066"),n=c("2ba4"),r=c("e330"),d=c("d039"),i=a.Array,s=l("JSON","stringify"),u=r(/./.exec),b=r("".charAt),m=r("".charCodeAt),p=r("".replace),O=r(1..toString),j=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,f=/^[\uDC00-\uDFFF]$/,E=function(e,t,c){var o=b(c,t-1),a=b(c,t+1);return u(h,e)&&!u(f,a)||u(f,e)&&!u(h,o)?"\\u"+O(m(e,0),16):e},N=d((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&o({target:"JSON",stat:!0,forced:N},{stringify:function(e,t,c){for(var o=0,a=arguments.length,l=i(a);o<a;o++)l[o]=arguments[o];var r=n(s,null,l);return"string"==typeof r?p(r,j,E):r}})}}]);
//# sourceMappingURL=chunk-56a7baa4.18c930db.js.map