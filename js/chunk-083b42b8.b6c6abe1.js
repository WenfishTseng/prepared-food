(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-083b42b8"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),n=c("da84"),o=c("c65b"),r=c("e330"),l=c("1626"),s=c("861d"),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),i=n.Error,u=r(/./.test);a({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=this.exec;if(!l(t))return u(this,e);var c=o(t,this,e);if(null!==c&&!s(c))throw new i("RegExp exec method returned something other than an Object or null");return!!c}})},"0b42":function(e,t,c){var a=c("da84"),n=c("e8b5"),o=c("68ee"),r=c("861d"),l=c("b622"),s=l("species"),d=a.Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,o(t)&&(t===d||n(t.prototype))?t=void 0:r(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?d:t}},"107c":function(e,t,c){var a=c("d039"),n=c("da84"),o=n.RegExp;e.exports=a((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"1dde":function(e,t,c){var a=c("d039"),n=c("b622"),o=c("2d00"),r=n("species");e.exports=function(e){return o>=51||!a((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,c){var a=c("0b42");e.exports=function(e,t){return new(a(e))(0===t?0:t)}},"6be2":function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},n=a();t["a"]=n},8418:function(e,t,c){"use strict";var a=c("a04b"),n=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var r=a(t);r in e?n.f(e,r,o(0,c)):e[r]=c}},9263:function(e,t,c){"use strict";var a=c("c65b"),n=c("e330"),o=c("577e"),r=c("ad6d"),l=c("9f7f"),s=c("5692"),d=c("7c73"),i=c("69f3").get,u=c("fce3"),b=c("107c"),m=s("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,p=f,g=n("".charAt),O=n("".indexOf),j=n("".replace),v=n("".slice),h=function(){var e=/a/,t=/b*/g;return a(f,e,"a"),a(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=l.BROKEN_CARET,V=void 0!==/()??/.exec("")[1],E=h||V||x||u||b;E&&(p=function(e){var t,c,n,l,s,u,b,E=this,N=i(E),y=o(e),k=N.raw;if(k)return k.lastIndex=E.lastIndex,t=a(p,k,y),E.lastIndex=k.lastIndex,t;var w=N.groups,C=x&&E.sticky,S=a(r,E),D=E.source,I=0,B=y;if(C&&(S=j(S,"y",""),-1===O(S,"g")&&(S+="g"),B=v(y,E.lastIndex),E.lastIndex>0&&(!E.multiline||E.multiline&&"\n"!==g(y,E.lastIndex-1))&&(D="(?: "+D+")",B=" "+B,I++),c=new RegExp("^(?:"+D+")",S)),V&&(c=new RegExp("^"+D+"$(?!\\s)",S)),h&&(n=E.lastIndex),l=a(f,C?c:E,B),C?l?(l.input=v(l.input,I),l[0]=v(l[0],I),l.index=E.lastIndex,E.lastIndex+=l[0].length):E.lastIndex=0:h&&l&&(E.lastIndex=E.global?l.index+l[0].length:n),V&&l&&l.length>1&&a(m,l[0],c,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(l[s]=void 0)})),l&&w)for(l.groups=u=d(null),s=0;s<w.length;s++)b=w[s],u[b[0]]=l[b[1]];return l}),e.exports=p},"99af":function(e,t,c){"use strict";var a=c("23e7"),n=c("da84"),o=c("d039"),r=c("e8b5"),l=c("861d"),s=c("7b0b"),d=c("07fa"),i=c("8418"),u=c("65f0"),b=c("1dde"),m=c("b622"),f=c("2d00"),p=m("isConcatSpreadable"),g=9007199254740991,O="Maximum allowed index exceeded",j=n.TypeError,v=f>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),h=b("concat"),x=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},V=!v||!h;a({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,a,n,o,r=s(this),l=u(r,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?r:arguments[t],x(o)){if(n=d(o),b+n>g)throw j(O);for(c=0;c<n;c++,b++)c in o&&i(l,b,o[c])}else{if(b>=g)throw j(O);i(l,b++,o)}return l.length=b,l}})},"9f7f":function(e,t,c){var a=c("d039"),n=c("da84"),o=n.RegExp,r=a((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),l=r||a((function(){return!o("a","y").sticky})),s=r||a((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:l,UNSUPPORTED_Y:r}},"9fe5":function(e,t,c){"use strict";c.r(t);c("b0c0"),c("b64b");var a=c("7a23"),n=Object(a["createElementVNode"])("div",{class:"text-center"},[Object(a["createElementVNode"])("div",{class:"fa-3x text-primary"},[Object(a["createElementVNode"])("i",{class:"fa-solid fa-champagne-glasses fa-bounce"})]),Object(a["createElementVNode"])("div",{class:"text-primary"},"Loading")],-1),o={class:"container my-5 my-lg-6"},r=Object(a["createStaticVNode"])('<div class="row row-cols-1 row-cols-lg-4 g-3 align-items-center"><div class="col d-none d-lg-block bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">購物車結帳流程</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">1. 放入購物車</p></div><div class="col bg-dark text-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">2. 資料確認</p></div><div class="col d-none d-lg-block bg-light border border-2 border-white"><p class="mb-0 px-3 py-4 h5">3. 完成購物</p></div></div>',1),l={class:"row"},s={class:"col-12"},d={class:"table align-middle mt-3"},i=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{width:"150"}),Object(a["createElementVNode"])("th",{width:"300"},"商名"),Object(a["createElementVNode"])("th",{class:"text-end"},"數量"),Object(a["createElementVNode"])("th",{width:"120",class:"text-end"},"單價"),Object(a["createElementVNode"])("th",{width:"120",class:"text-end"},"小計")])],-1),u={class:"text-end"},b={class:"text-end"},m={class:"text-end"},f=Object(a["createElementVNode"])("tfoot",null,[Object(a["createElementVNode"])("td")],-1),p={class:"row my-1"},g=Object(a["createElementVNode"])("div",{class:"col-md-6"},[Object(a["createElementVNode"])("p",{class:"text-primary fw-bold"},"試營運20日天天免運")],-1),O={class:"offset-lg-3 col-lg-3"},j={class:"input-group mb-3"},v={key:0,class:"col-12 my-1"},h={class:"text-end mb-0"},x=Object(a["createTextVNode"])(" 金額 "),V={class:"h5 fw-bold"},E={key:1,class:"col-12 my-2"},N={class:"text-end mb-0 text-decoration-line-through"},y=Object(a["createTextVNode"])(" 原始金額 "),k={class:"h5"},w={class:"text-end"},C={key:0,class:"alert alert-primary py-1 me-1"},S=Object(a["createTextVNode"])(" 折扣後金額 "),D={class:"h4 fw-bold text-danger ms-1 ms-lg-2"},I={class:"col-lg-8"},B=Object(a["createElementVNode"])("h1",{class:"h4 text-center fw-bold mb-3"},"收件資訊",-1),R={class:"mb-3"},T=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"收件人信箱",-1),$={class:"mb-3"},A=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),U={class:"mb-3"},_=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人手機號碼",-1),L={class:"mb-3"},M=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),F={class:"mb-3"},P=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),z={class:"col-lg-8 text-end my-3 my-lg-4"},q={class:"row"},K={class:"col-lg-6 mb-3 my-lg-0"},J={class:"col-lg-6 my-1 my-lg-0"},Y=["disabled"];function X(e,t,c,X,G,H){var Q=Object(a["resolveComponent"])("Loading"),W=Object(a["resolveComponent"])("Field"),Z=Object(a["resolveComponent"])("ErrorMessage"),ee=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(Q,{active:G.isLoading,"onUpdate:active":t[0]||(t[0]=function(e){return G.isLoading=e})},{default:Object(a["withCtx"])((function(){return[n]})),_:1},8,["active"]),Object(a["createElementVNode"])("div",o,[r,Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("table",d,[i,Object(a["createElementVNode"])("tbody",null,[G.cartData.carts?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(G.cartData.carts,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",{style:Object(a["normalizeStyle"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.product.imageUrl,")")}])},null,4)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.product.title),1)]),Object(a["createElementVNode"])("td",u,Object(a["toDisplayString"])(e.qty),1),Object(a["createElementVNode"])("td",b,Object(a["toDisplayString"])(e.product.price),1),Object(a["createElementVNode"])("td",m,Object(a["toDisplayString"])(e.product.price*e.qty),1)])})),128)):Object(a["createCommentVNode"])("",!0)]),f])])]),Object(a["createElementVNode"])("div",p,[g,Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",j,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return G.code=e}),class:"form-control",placeholder:"優惠碼"},null,512),[[a["vModelText"],G.code]]),Object(a["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(){return H.getCoupon&&H.getCoupon.apply(H,arguments)}),["prevent"]))}," 確認 ")])]),G.cartData.total===G.cartData.final_total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",v,[Object(a["createElementVNode"])("p",h,[x,Object(a["createElementVNode"])("span",V," NT$ "+Object(a["toDisplayString"])(G.cartData.total),1)])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",E,[Object(a["createElementVNode"])("p",N,[y,Object(a["createElementVNode"])("span",k," NT$ "+Object(a["toDisplayString"])(G.cartData.total),1)]),Object(a["createElementVNode"])("p",w,[G.successCode?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",C,"已套用優惠碼: "+Object(a["toDisplayString"])(G.successCode),1)):Object(a["createCommentVNode"])("",!0),S,Object(a["createElementVNode"])("span",D," NT$ "+Object(a["toDisplayString"])(Math.round(G.cartData.final_total)),1)])]))]),Object(a["createVNode"])(ee,{ref:"form",onSubmit:H.onSubmit,class:"row justify-content-center"},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createElementVNode"])("div",I,[B,Object(a["createElementVNode"])("div",R,[T,Object(a["createVNode"])(W,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:G.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return G.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Z,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",$,[A,Object(a["createVNode"])(W,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"max:12||required",modelValue:G.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return G.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Z,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",U,[_,Object(a["createVNode"])(W,{id:"tel",name:"電話",type:"tel",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",modelValue:G.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return G.form.user.tel=e}),rules:H.isFormPhone},null,8,["class","modelValue","rules"]),Object(a["createVNode"])(Z,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",L,[M,Object(a["createVNode"])(W,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:G.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return G.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Z,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",F,[P,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[7]||(t[7]=function(e){return G.form.message=e})},null,512),[[a["vModelText"],G.form.message]])])]),Object(a["createElementVNode"])("div",z,[Object(a["createElementVNode"])("div",q,[Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-dark w-100",onClick:t[8]||(t[8]=function(){return H.goBackPage&&H.goBackPage.apply(H,arguments)}),type:"button"}," 回上一頁 ")]),Object(a["createElementVNode"])("div",J,[Object(a["createElementVNode"])("button",{class:"btn btn-primary w-100",disabled:Object.keys(c).length>0||0===G.cartData.total,type:"submit"}," 送出訂單 ",8,Y)])])])]})),_:1},8,["onSubmit"])])],64)}c("99af"),c("ac1f"),c("00b4");var G=c("6be2"),H={data:function(){return{cartData:{},isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},code:"",successCode:""}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/cart")).then((function(t){e.cartData=t.data.data,G["a"].emit("get-cart"),e.isLoading=!1})).catch((function(t){e.isLoading=!1,alert(t)}))},isFormPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},onSubmit:function(){var e=this,t=this.form;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/order"),{data:t}).then((function(t){alert(t.data.message),e.$refs.form.resetForm(),e.getCarts(),e.$router.push("/result")})).catch((function(e){alert(e)}))},goBackPage:function(){this.$router.go(-1)},getCoupon:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("pre-food","/coupon"),{data:{code:this.code}}).then((function(t){t.data.success&&(alert(t.data.message),e.cartData.final_total=Math.round(t.data.data.final_total),e.successCode=e.code,e.code="")})).catch((function(e){alert(e.response.data.message)}))}},mounted:function(){this.getCarts()}},Q=c("6b0d"),W=c.n(Q);const Z=W()(H,[["render",X]]);t["default"]=Z},ac1f:function(e,t,c){"use strict";var a=c("23e7"),n=c("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,c){"use strict";var a=c("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,c){var a=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),r=c("9bf2").f,l=Function.prototype,s=o(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=o(d.exec),u="name";a&&!n&&r(l,u,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})},b64b:function(e,t,c){var a=c("23e7"),n=c("7b0b"),o=c("df75"),r=c("d039"),l=r((function(){o(1)}));a({target:"Object",stat:!0,forced:l},{keys:function(e){return o(n(e))}})},e8b5:function(e,t,c){var a=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},fce3:function(e,t,c){var a=c("d039"),n=c("da84"),o=n.RegExp;e.exports=a((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-083b42b8.b6c6abe1.js.map